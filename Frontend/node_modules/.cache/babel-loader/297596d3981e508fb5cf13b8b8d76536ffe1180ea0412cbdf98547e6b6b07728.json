{"ast":null,"code":"import BlogHeader from \"../components/blogHeader.vue\";\nimport SecondHeader from \"../components/SecondHeader.vue\";\nimport { RouterLink } from \"vue-router\";\nimport { mavonEditor } from 'mavon-editor';\nimport '/Users/chaofanhu/Frontend/mineblog/node_modules/mavon-editor/dist/css/index.css';\nexport default {\n  components: {\n    BlogHeader,\n    RouterLink,\n    SecondHeader,\n    mavonEditor\n  },\n  data() {\n    return {\n      blog: {\n        title: \"\",\n        introduction: \"\",\n        content: \"\",\n        blogType: \"\",\n        catagoryType: \"\",\n        // tagType:\"\",\n        firstPicture: \"\",\n        userId: \"\"\n      },\n      html: \"\",\n      optionsBlogType: [{\n        text: \"Original\",\n        value: \"1\"\n      }, {\n        text: \"Citation\",\n        value: \"2\"\n      }],\n      catagoryTypes: [],\n      tagTypes: [],\n      markdownOption: {\n        //自定义文本标签\n        bold: true,\n        // 粗体\n        italic: true,\n        // 斜体\n        strikethrough: true,\n        // 中划线\n        underline: true // 下划线\n      }\n    };\n  },\n\n  created: function () {\n    this.getAllCategories();\n  },\n  methods: {\n    // change(value, render) {\n    //     //实时获取转成html的数据\n    //     this.blog.html = render\n    // },\n    change(value, render) {\n      // render 为 markdown 解析后的结果[html]\n      this.html = render;\n    },\n    $imgAdd(pos, $file) {\n      console.log($file);\n      let formdata = new FormData();\n      formdata.append('file', $file);\n      this.$axios.post('上传服务器链接', formdata).then(res => {\n        console.log(res.data.url);\n        this.$refs.md.$img2Url(pos, res.data.url);\n      }).catch(err => {\n        console.log(err);\n      });\n    },\n    getAllBlogType() {\n      const _this = this;\n      this.axios.get(\"http://localhost:8090/admin/selectAllCategory\").then(function (resp) {\n        _this.optionsBlogType = resp.data;\n      });\n    },\n    getAllCategories() {\n      var _this = this;\n      this.axios.get(\"http://localhost:8090/admin/selectAllCategory\").then(function (resp) {\n        _this.catagoryTypes = resp.data;\n        console.log(_this.catagoryTypes);\n      });\n    },\n    save() {},\n    establish() {\n      var _this = this;\n      let user = localStorage.getItem(\"user\");\n      this.data.userId = user;\n      this.axios.post(\"localhost:8090/admin/\", this.$qs.stringify(_this.blog)).then(function (resp) {\n        if (resp.config.code === \"200\") {\n          alert(\"success\");\n        } else {\n          alert(\"wrong\");\n        }\n      });\n    }\n    // getAllTags(){\n    //     const _this = this;\n    //     this.axios.get(\"localhost:8090/admin/selectAllCategory\")\n    //     .then(function(resp){\n    //         _this.tagTypes = resp.data;\n    //     })\n    // }\n  }\n};","map":{"version":3,"names":["BlogHeader","SecondHeader","RouterLink","mavonEditor","components","data","blog","title","introduction","content","blogType","catagoryType","firstPicture","userId","html","optionsBlogType","text","value","catagoryTypes","tagTypes","markdownOption","bold","italic","strikethrough","underline","created","getAllCategories","methods","change","render","$imgAdd","pos","$file","console","log","formdata","FormData","append","$axios","post","then","res","url","$refs","md","$img2Url","catch","err","getAllBlogType","_this","axios","get","resp","save","establish","user","localStorage","getItem","$qs","stringify","config","code","alert"],"sources":["src/views/blogPublishPage.vue"],"sourcesContent":["<template>\n    <div>\n            <!-- head  -->\n        <BlogHeader></BlogHeader>\n    <!-- secondary header  -->\n    <SecondHeader></SecondHeader>\n\n      <!-- content  -->\n      <div class=\"m-container-small m-padding-tb-big\">\n        <div class=\"ui container\">\n            <sui-form>\n                <sui-form-fields>\n\n                    <sui-form-field width=\"four\">\n                        <label>Type</label>\n                        <sui-form-fields>\n                            <sui-form-field>\n                                <sui-dropdown\n                                placeholder=\"Original\"\n                                selection\n                                :options=\"optionsBlogType\"\n                                v-model=\"blog.blogType\"\n                                />\n                            </sui-form-field>\n                        </sui-form-fields>\n                    </sui-form-field>\n                    <sui-form-field width=\"twelve\" >\n                        <label>Title</label>\n                        <input v-model=\"blog.title\" type=\"text\" name=\"title\" placeholder=\"Please input title\" />\n                    </sui-form-field>\n                </sui-form-fields>\n\n                    <sui-form-field>\n                    <label>Introduction</label>\n                    <textarea v-model=\"blog.introduction\"></textarea>\n                    </sui-form-field>\n                    <sui-divider hidden />\n\n                <sui-form-field>\n                    <label>Content</label>\n                    <mavon-editor \n                        v-model=\"blog.content\"\n                        placeholder=\"Waiting for input....\" \n                        @imgAdd=\"$imgAdd\"\n                        :toolbars=\"markdownOption\"\n                        @change=\"change\"\n       \n                    />\n                    <!-- ref=\"md\"\n                                               :subfield=\"false\"\n                         -->\n                    <!-- <textarea v-model=\"content\" name=\"content\" placeholder=\"Content\" rows=\"20\" cols=\"50\" style=\"display:none;\"></textarea> -->\n                </sui-form-field>\n\n                <sui-divider hidden />\n\n                <sui-form-fields fields=\"two\">\n                    <sui-form-field >\n                       <label for=\"\">Catagory</label>\n                        <sui-dropdown\n                        placeholder=\"Catogory\"\n                        selection\n                        :options=\"catagoryTypes\"\n                        v-model=\"blog.catagoryTypes\"\n                        />\n                        {{ blog.catagoryTypes }}\n                    </sui-form-field>\n                    <sui-form-field >\n                        <label for=\"\">Tags</label>\n                        <sui-dropdown\n                        :options=\"tagTypes\"\n                        placeholder=\"Tags\"\n                        search\n                        selection\n                        v-model=\"blog.tagType\"\n                        />\n                    </sui-form-field>\n                </sui-form-fields>\n\n                <sui-divider hidden />\n\n                <sui-form-field width=\"sixteen\">\n                    <label>Picture</label>\n                    <input type=\"text\" name=\"\" id=\"\" placeholder=\"URL\" v-model=\"blog.firstPicture\">\n                </sui-form-field>\n\n                <!-- <sui-button-group color=\"blue\">\n                    <sui-button content=\"One\" />\n                    <sui-button content=\"Two\" />\n                    <sui-button content=\"Three\" />\n                </sui-button-group> -->\n            </sui-form>\n            \n            <sui-divider hidden />\n\n            <div class=\"ui right aligned container\">\n                    <button type=\"button\" class=\"ui white button\"><RouterLink to=\"/blogManPage\">Back</RouterLink>></button>\n                    <button class=\"ui secondary button\" @click=\"save\">Save</button>\n                    <button class=\"ui teal button\" @click=\"establish\">Establish</button>\n            </div>\n        </div>\n      </div>\n    </div>\n</template>\n\n<script>\nimport BlogHeader from \"../components/blogHeader.vue\"\nimport SecondHeader from \"../components/SecondHeader.vue\"\nimport { RouterLink } from \"vue-router\"\nimport { mavonEditor } from 'mavon-editor'\nimport '/Users/chaofanhu/Frontend/mineblog/node_modules/mavon-editor/dist/css/index.css'\n\nexport default{\n    components:{\n    BlogHeader,\n    RouterLink,\n    SecondHeader,\n    mavonEditor\n    },\n    data () {\n        return{\n            blog:{\n                title:\"\",\n                introduction:\"\",\n                content:\"\",\n                blogType:\"\",\n                catagoryType:\"\",\n                // tagType:\"\",\n                firstPicture:\"\",\n                userId:\"\"\n            },\n            html:\"\",\n             \n            optionsBlogType:[ {text:\"Original\", value:\"1\"},\n            {text:\"Citation\", value:\"2\"}    \n            ],\n\n            catagoryTypes:[],\n \n            tagTypes:[],\n\n            markdownOption:{ //自定义文本标签\n                bold: true, // 粗体\n                italic: true,// 斜体\n                strikethrough: true, // 中划线\n                underline: true, // 下划线\n          }\n        }\n    },\n    created: function(){\n        this.getAllCategories();\n    },\n    methods:{\n        // change(value, render) {\n        //     //实时获取转成html的数据\n        //     this.blog.html = render\n        // },\n        change(value, render){\n            // render 为 markdown 解析后的结果[html]\n            this.html = render;\n            \n        },\n        $imgAdd(pos, $file){\n            console.log($file)\n            let formdata = new FormData();\n            formdata.append('file',$file)\n            this.$axios.post('上传服务器链接', formdata).then(res => {\n                console.log(res.data.url);\n                this.$refs.md.$img2Url(pos, res.data.url);\n            }).catch(err => {\n                console.log(err)\n            })\n        },\n        getAllBlogType(){\n            const _this = this;\n            this.axios.get(\"http://localhost:8090/admin/selectAllCategory\")\n            .then(function(resp){\n                _this.optionsBlogType = resp.data;\n            })\n        }\n        ,\n        getAllCategories(){\n            var _this = this;\n            this.axios.get(\"http://localhost:8090/admin/selectAllCategory\")\n            .then(function(resp){\n                _this.catagoryTypes = resp.data;\n                console.log(_this.catagoryTypes)\n            })\n        },\n        save(){\n\n        },\n        establish(){\n            var _this = this;\n            let user = localStorage.getItem(\"user\");\n            this.data.userId = user;\n            this.axios.post(\"localhost:8090/admin/\",\n            this.$qs.stringify(_this.blog))\n            .then(function(resp){\n                if(resp.config.code === \"200\"){\n                    alert(\"success\")\n                }else{\n                    alert(\"wrong\")\n                }\n            })\n        },\n        // getAllTags(){\n        //     const _this = this;\n        //     this.axios.get(\"localhost:8090/admin/selectAllCategory\")\n        //     .then(function(resp){\n        //         _this.tagTypes = resp.data;\n        //     })\n        // }\n    }\n   \n}\n</script>\n\n<style scoped>\n\n</style>"],"mappings":"AA0GA,OAAAA,UAAA;AACA,OAAAC,YAAA;AACA,SAAAC,UAAA;AACA,SAAAC,WAAA;AACA;AAEA;EACAC,UAAA;IACAJ,UAAA;IACAE,UAAA;IACAD,YAAA;IACAE;EACA;EACAE,KAAA;IACA;MACAC,IAAA;QACAC,KAAA;QACAC,YAAA;QACAC,OAAA;QACAC,QAAA;QACAC,YAAA;QACA;QACAC,YAAA;QACAC,MAAA;MACA;MACAC,IAAA;MAEAC,eAAA;QAAAC,IAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,IAAA;QAAAC,KAAA;MAAA,EACA;MAEAC,aAAA;MAEAC,QAAA;MAEAC,cAAA;QAAA;QACAC,IAAA;QAAA;QACAC,MAAA;QAAA;QACAC,aAAA;QAAA;QACAC,SAAA;MACA;IACA;EACA;;EACAC,OAAA,WAAAA,CAAA;IACA,KAAAC,gBAAA;EACA;EACAC,OAAA;IACA;IACA;IACA;IACA;IACAC,OAAAX,KAAA,EAAAY,MAAA;MACA;MACA,KAAAf,IAAA,GAAAe,MAAA;IAEA;IACAC,QAAAC,GAAA,EAAAC,KAAA;MACAC,OAAA,CAAAC,GAAA,CAAAF,KAAA;MACA,IAAAG,QAAA,OAAAC,QAAA;MACAD,QAAA,CAAAE,MAAA,SAAAL,KAAA;MACA,KAAAM,MAAA,CAAAC,IAAA,YAAAJ,QAAA,EAAAK,IAAA,CAAAC,GAAA;QACAR,OAAA,CAAAC,GAAA,CAAAO,GAAA,CAAApC,IAAA,CAAAqC,GAAA;QACA,KAAAC,KAAA,CAAAC,EAAA,CAAAC,QAAA,CAAAd,GAAA,EAAAU,GAAA,CAAApC,IAAA,CAAAqC,GAAA;MACA,GAAAI,KAAA,CAAAC,GAAA;QACAd,OAAA,CAAAC,GAAA,CAAAa,GAAA;MACA;IACA;IACAC,eAAA;MACA,MAAAC,KAAA;MACA,KAAAC,KAAA,CAAAC,GAAA,kDACAX,IAAA,WAAAY,IAAA;QACAH,KAAA,CAAAlC,eAAA,GAAAqC,IAAA,CAAA/C,IAAA;MACA;IACA;IAEAqB,iBAAA;MACA,IAAAuB,KAAA;MACA,KAAAC,KAAA,CAAAC,GAAA,kDACAX,IAAA,WAAAY,IAAA;QACAH,KAAA,CAAA/B,aAAA,GAAAkC,IAAA,CAAA/C,IAAA;QACA4B,OAAA,CAAAC,GAAA,CAAAe,KAAA,CAAA/B,aAAA;MACA;IACA;IACAmC,KAAA,GAEA;IACAC,UAAA;MACA,IAAAL,KAAA;MACA,IAAAM,IAAA,GAAAC,YAAA,CAAAC,OAAA;MACA,KAAApD,IAAA,CAAAQ,MAAA,GAAA0C,IAAA;MACA,KAAAL,KAAA,CAAAX,IAAA,0BACA,KAAAmB,GAAA,CAAAC,SAAA,CAAAV,KAAA,CAAA3C,IAAA,GACAkC,IAAA,WAAAY,IAAA;QACA,IAAAA,IAAA,CAAAQ,MAAA,CAAAC,IAAA;UACAC,KAAA;QACA;UACAA,KAAA;QACA;MACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACA;AAEA"},"metadata":{},"sourceType":"module","externalDependencies":[]}